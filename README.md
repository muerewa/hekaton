# Hekaton - –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

Hekaton ‚Äî —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –∏ –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ Go, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ bash-–∫–æ–º–∞–Ω–¥ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –∑–∞–¥–∞–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ YAML ‚Äî –ø—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –±–µ–∑ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ bash-–∫–æ–º–∞–Ω–¥ ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª—é–±—ã—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ shell-—Å–∫—Ä–∏–ø—Ç—ã
- –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ `>`, `<`, `>=`, `<=`, `==`, `!=`
- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è —Å —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Äî –∫–∞–∂–¥–æ–µ –ø—Ä–∞–≤–∏–ª–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ
- Graceful shutdown ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ

## Quick Start

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.19+
- –î–æ—Å—Ç—É–ø –∫ bash (Linux/macOS)
- Telegram Bot Token (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

git clone https://github.com/muerewa/hekaton.git
cd hekaton
go mod tidy
go build -o hekaton .

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `config.yaml`:

    name: "cpu_temp_high"
    bash: "sensors | awk '/^Package id 0:/ {print int($4)}'"
    compare:
    operator: ">"
    value: 80
    actions:

        type: "telegram"
        params:
        token: "YOUR_BOT_TOKEN"
        chat_id: "YOUR_CHAT_ID"
        message: "üî• –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ CPU: {{.Result}}¬∞C!"

    name: "disk_usage_critical"
    bash: "df --output=pcent / | tail -1 | tr -dc '0-9'"
    compare:
    operator: ">="
    value: 95
    actions:

        type: "telegram"
        params:
        token: "YOUR_BOT_TOKEN"
        chat_id: "YOUR_CHAT_ID"
        message: "üíæ –î–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ {{.Result}}%!"


### –ó–∞–ø—É—Å–∫

./argusyaml -config config.yaml

text

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

| –ü–æ–ª–µ               | –û–ø–∏—Å–∞–Ω–∏–µ                         | –¢–∏–ø           | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
|--------------------|----------------------------------|---------------|-------------|
| `name`             | –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –ø—Ä–∞–≤–∏–ª–∞           | string        | –î–∞          |
| `bash`             | –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è           | string        | –î–∞          |
| `compare.operator` | –û–ø–µ—Ä–∞—Ç–æ—Ä —Å—Ä–∞–≤–Ω–µ–Ω–∏—è               | string        | –î–∞          |
| `compare.value`    | –ü–æ—Ä–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ               | number/string | –î–∞          |
| `actions`          | –°–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ | array         | –î–∞          |

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã

- `==` ‚Äî —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ
- `!=` ‚Äî –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–æ  
- `>` ‚Äî –±–æ–ª—å—à–µ
- `<` ‚Äî –º–µ–Ω—å—à–µ
- `>=` ‚Äî –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ
- `<=` ‚Äî –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather: https://t.me/botfather
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –£–∑–Ω–∞–π—Ç–µ –≤–∞—à Chat ID —á–µ—Ä–µ–∑ @userinfobot: https://t.me/userinfobot
4. –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é


## –°–±–æ—Ä–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

Linux

GOOS=linux GOARCH=amd64 go build -o argusyaml-linux .
macOS

GOOS=darwin GOARCH=amd64 go build -o argusyaml-macos .
Windows

GOOS=windows GOARCH=amd64 go build -o argusyaml.exe .

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–∏—Å–æ–≤

    name: "nginx_status"
    bash: "systemctl is-active nginx"
    compare:
    operator: "!="
    value: "active"
    actions:

        type: "telegram"
        params:
        token: "BOT_TOKEN"
        chat_id: "CHAT_ID"
        message: "üö® Nginx –Ω–µ –∑–∞–ø—É—â–µ–Ω! –°—Ç–∞—Ç—É—Å: {{.Result}}"


### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏

    name: "memory_usage"
    bash: "free | awk '/^Mem:/ {print int($3/$2 * 100)}'"
    compare:
    operator: ">="
    value: 90
    actions:

        type: "telegram"
        params:
        token: "BOT_TOKEN"
        chat_id: "CHAT_ID"
        message: "‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: {{.Result}}%"
